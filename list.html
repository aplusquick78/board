<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>게시글 목록</title>
    <style>
        body { font-family: Arial, sans-serif; }
        h1 { text-align: center; }
        .post { border: 1px solid #ddd; padding: 10px; margin: 10px; cursor: pointer; }
        .link { text-align: center; margin: 20px; }
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgb(0,0,0);
            background-color: rgba(0,0,0,0.4);
            padding-top: 60px;
        }
        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>게시글 목록</h1>

    <div id="postsContainer">
        <!-- 게시글이 여기에 추가됩니다. -->
    </div>

    <div class="link">
        <a href="post.html">새 게시글 작성</a>
    </div>

    <!-- 모달 -->
    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3 id="modalTitle"></h3>
            <p id="modalContent"></p>
        </div>
    </div>

    <script>
        const postsContainer = document.getElementById('postsContainer');
        const modal = document.getElementById("myModal");
        const modalTitle = document.getElementById("modalTitle");
        const modalContent = document.getElementById("modalContent");
        const closeBtn = document.getElementsByClassName("close")[0];

        // 로컬 스토리지에서 게시글 가져오기
        const posts = JSON.parse(localStorage.getItem('posts')) || [];

        posts.forEach((post, index) => {
            const postDiv = document.createElement('div');
            postDiv.className = 'post';
            postDiv.innerHTML = `<h3>${post.title}</h3>`;
            postDiv.onclick = () => {
                modal.style.display = "block";
                modalTitle.innerText = post.title;
                modalContent.innerText = post.content;
            };
            postsContainer.appendChild(postDiv);
        });

        if (posts.length === 0) {
            postsContainer.innerHTML = '<p>게시글이 없습니다.</p>';
        }

        // 모달 닫기 기능
        closeBtn.onclick = function() {
            modal.style.display = "none";
        }

        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
    </script>
</body>
</html>
